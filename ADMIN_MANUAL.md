# AI Telop Generator v2 管理者マニュアル

## 目次
1. [概要](#概要)
2. [管理者アクセス](#管理者アクセス)
3. [ユーザー管理](#ユーザー管理)
4. [使用量管理](#使用量管理)
5. [システム設定](#システム設定)
6. [トラブルシューティング](#トラブルシューティング)

---

## 概要

AI Telop Generator v2は、ユーザーごとの使用量制限と管理機能を備えたAIテロップ生成システムです。管理者はユーザーの作成・削除、使用量の監視、制限設定などを行うことができます。

### 主な管理機能
- ユーザー作成・削除
- 使用量制限設定
- リアルタイム使用状況監視
- ユーザーの有効/無効化

---

## 管理者アクセス

### 1. ログイン
1. アプリケーションURL: https://telop-ai-tool-v2-cpq64pqfw-nons-projects-fd6dcdb5.vercel.app
2. 管理者アカウントでログイン:
   - **ユーザーID**: `admin`
   - **パスワード**: `admin123`

### 2. 管理者パネルへのアクセス
- ログイン後、右上の「管理者パネル」ボタンをクリック
- 管理者権限を持つユーザーのみボタンが表示されます

---

## ユーザー管理

### 新規ユーザー作成

1. **管理者パネル** → **新規ユーザー作成**セクション
2. 必要項目を入力:
   - **ユーザーID**: 一意の識別子（例: user004）
   - **パスワード**: ログイン用パスワード
   - **名前**: 表示名（例: 山田太郎）
   - **権限**: ユーザー または 管理者
   - **日次制限**: 1日あたりの最大リクエスト数
   - **月次制限**: 1ヶ月あたりの最大リクエスト数
   - **最大ファイルサイズ**: アップロード可能な最大ファイルサイズ（MB）

3. **ユーザー作成**ボタンをクリック

### 既存ユーザー管理

#### ユーザー情報の確認
- **ユーザー一覧**テーブルで全ユーザーの情報を確認
- 表示項目:
  - ID、名前、権限、状態
  - 日次使用量/制限
  - 月次使用量/制限
  - 制限設定

#### ユーザー制限の編集
1. 対象ユーザーの「編集」ボタンをクリック
2. 制限値を変更:
   - 日次制限
   - 月次制限
   - 最大ファイルサイズ
3. **更新**ボタンをクリック

#### ユーザーの有効/無効化
- **有効化**/**無効化**ボタンをクリック
- 無効化されたユーザーはログインできません

#### ユーザーの削除
- **削除**ボタンをクリック
- 確認ダイアログで「OK」をクリック
- ⚠️ **注意**: 管理者アカウント（admin）は削除できません

---

## 使用量管理

### 使用量の確認

#### リアルタイム監視
- **ユーザー一覧**で各ユーザーの使用状況を確認
- 日次使用量: 今日の使用回数/制限
- 月次使用量: 今月の使用回数/制限

#### 使用量の種類
1. **リクエスト数**
   - 文字起こし（transcribe）API呼び出し
   - テロップ化（rewrite）API呼び出し
   - 1回の処理で2回のAPIコールが発生

2. **ファイルサイズ**
   - アップロードされる音声/動画ファイルのサイズ
   - 制限を超えるファイルはアップロード拒否

### 制限設定のガイドライン

#### 推奨制限値
- **一般ユーザー**:
  - 日次制限: 10-20回
  - 月次制限: 100-300回
  - ファイルサイズ: 50MB

- **ヘビーユーザー**:
  - 日次制限: 50-100回
  - 月次制限: 500-1000回
  - ファイルサイズ: 100MB

- **管理者**:
  - 日次制限: 999回（実質無制限）
  - 月次制限: 999回（実質無制限）
  - ファイルサイズ: 100MB

---

## システム設定

### デフォルトユーザー

システムには以下のデフォルトユーザーが設定されています：

| ユーザーID | パスワード | 名前 | 権限 | 日次制限 | 月次制限 | ファイルサイズ |
|-----------|-----------|------|------|----------|----------|---------------|
| admin | admin123 | 管理者 | 管理者 | 999 | 999 | 100MB |
| user001 | telop2024 | 田中太郎 | ユーザー | 10 | 100 | 50MB |
| user002 | salon2024 | 佐藤花子 | ユーザー | 5 | 50 | 30MB |
| user003 | video2024 | 高橋一郎 | ユーザー | 15 | 150 | 75MB |

### 使用量リセット
- **日次制限**: 毎日午前0時に自動リセット
- **月次制限**: 毎月1日に自動リセット
- 手動リセット機能は現在未実装

---

## トラブルシューティング

### よくある問題

#### 1. ユーザーがログインできない
- **確認事項**:
  - ユーザーIDとパスワードが正しいか
  - ユーザーが有効化されているか
  - ブラウザのキャッシュをクリアしたか

#### 2. 使用量制限に達したユーザーの対応
- **対処法**:
  - 制限値を一時的に増加
  - 翌日/翌月まで待機
  - 特別な理由がある場合は制限を恒久的に増加

#### 3. ファイルアップロードができない
- **確認事項**:
  - ファイルサイズが制限以下か
  - 対応ファイル形式か（MP3, WAV, MP4, MOV等）
  - 使用量制限に達していないか

#### 4. APIエラーが発生する
- **確認事項**:
  - OpenAI APIキーが正しく設定されているか
  - ユーザーの使用量制限に達していないか
  - サーバーの動作状況

### エラーメッセージと対処法

| エラーメッセージ | 原因 | 対処法 |
|-----------------|------|-------|
| 「ユーザーが見つかりません」 | 無効なユーザーID | ユーザーIDを確認 |
| 「日次制限に達しました」 | 日次使用量超過 | 制限値を調整または翌日まで待機 |
| 「月次制限に達しました」 | 月次使用量超過 | 制限値を調整または翌月まで待機 |
| 「ファイルサイズが制限を超えています」 | ファイルサイズ超過 | ファイルサイズ制限を調整 |

---

## 管理者の責任

### セキュリティ
- 管理者パスワードの定期的な変更
- 不要なユーザーアカウントの削除
- 使用量の監視と不正利用の防止

### 運用
- 適切な制限値の設定
- ユーザーサポート
- システムの安定運用

### バックアップ
- 現在のシステムではデータの永続化は実装されていません
- 重要なユーザー情報は別途記録することを推奨

---

## 連絡先

システムに関する問題や質問がある場合は、開発者に連絡してください。

**作成日**: 2025年7月17日  
**バージョン**: v2.0  
**最終更新**: 2025年7月17日